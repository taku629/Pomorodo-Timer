(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))d(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&d(a)}).observe(document,{childList:!0,subtree:!0});function c(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function d(e){if(e.ep)return;e.ep=!0;const t=c(e);fetch(e.href,t)}})();const f=document.getElementById("status"),I=document.getElementById("timer"),g=document.getElementById("cat-image"),m=document.getElementById("start-btn"),v=document.getElementById("log-list"),u=document.getElementById("work-time"),y=document.getElementById("break-time");let s,i=null,l=!1,p;const b=()=>{const n=Math.floor(s/60),o=s%60;I.innerText=`${n.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},h=()=>{const n=JSON.parse(localStorage.getItem("cat_tasks")||"[]"),o=new Date;o.setDate(o.getDate()-7);const c=n.filter(r=>new Date(r.date)>=o).reduce((r,w)=>r+(w.duration||0),0),d=Math.floor(c/60),e=c%60,t=`
    <div class="total-summary" style="background: #fff3e0; padding: 20px; border-radius: 15px; margin-bottom: 20px; border: 2px solid #ffb347;">
      <div style="font-size: 1rem; color: #e67e22; font-weight: bold; margin-bottom: 5px;">ğŸ¾ Weekly Study Time ğŸ¾</div>
      <div style="font-size: 2.5rem; font-weight: bold; color: #333;">${d}h ${e}m</div>
    </div>
  `,a=n.map(r=>`
    <div class="log-item"><span>${r.date.split("-").slice(1).join("/")} ${r.time}</span>: <strong>${r.task}</strong> (${r.duration} min)</div>
  `).join("");v.innerHTML=t+'<h3 style="text-align:left;">Recent Logs</h3>'+a},S=()=>{if(i&&clearInterval(i),i=null,l)l=!1,f.innerText="Back to work!",g.src="work_cat.jpg";else{const n=prompt("ä½•ã‚’ã—ã¦ã„ã¾ã—ãŸã‹ï¼Ÿ");if(n){const o=JSON.parse(localStorage.getItem("cat_tasks")||"[]");o.unshift({date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),task:n,duration:Number(u.value)}),localStorage.setItem("cat_tasks",JSON.stringify(o)),h()}l=!0,f.innerText="Break Time!",g.src="sleep_cat.jpg"}s=Number(l?y.value:u.value)*60,b(),m.innerText="Start!"};m.onclick=()=>{i?(clearInterval(i),i=null,m.innerText="Resume"):(s||(s=Number(l?y.value:u.value)*60),p=Date.now()+s*1e3,m.innerText="Pause",i=window.setInterval(()=>{const n=Date.now();s=Math.max(0,Math.ceil((p-n)/1e3)),s<=0?S():b()},1e3))};window.onload=h;
