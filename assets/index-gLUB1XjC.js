(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();const f=document.getElementById("status"),w=document.getElementById("timer"),g=document.getElementById("cat-image"),m=document.getElementById("start-btn"),I=document.getElementById("log-list"),u=document.getElementById("work-time"),p=document.getElementById("break-time");let a,l=null,d=!1;const y=()=>{const n=JSON.parse(localStorage.getItem("cat_tasks")||"[]"),e=new Date;e.setDate(e.getDate()-7);const r=n.filter(s=>new Date(s.date)>=e).reduce((s,h)=>s+(h.duration||0),0),i=Math.floor(r/60),t=r%60,o=`
    <div class="total-summary" style="background: #fff3e0; padding: 20px; border-radius: 15px; margin-bottom: 20px; border: 2px solid #ffb347;">
      <div style="font-size: 1rem; color: #e67e22; font-weight: bold; margin-bottom: 5px;">ğŸ¾ Weekly Study Time ğŸ¾</div>
      <div style="font-size: 2.5rem; font-weight: bold; color: #333;">${i}<span style="font-size: 1rem;">h</span> ${t}<span style="font-size: 1rem;">m</span></div>
    </div>
  `,c=n.map(s=>`
    <div class="log-item">
      <span class="log-time">${s.date.split("-").slice(1).join("/")} ${s.time}</span>: 
      <strong>${s.task}</strong> (${s.duration} min)
    </div>
  `).join("");I.innerHTML=o+'<h3 style="text-align:left;">Recent Logs</h3>'+c},k=()=>{const n=new AudioContext,e=n.createOscillator();e.type="sine",e.connect(n.destination),e.start(),e.stop(n.currentTime+.5)},v=()=>{if(l&&clearInterval(l),l=null,k(),d)d=!1,f.innerText="Focus! Back to work.",g.src="/work_cat.jpg";else{const e=prompt("What did you work on?");if(e){const r=JSON.parse(localStorage.getItem("cat_tasks")||"[]"),i=new Date;r.unshift({date:i.toISOString().split("T")[0],time:i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),task:e,duration:Number(u.value)}),localStorage.setItem("cat_tasks",JSON.stringify(r)),y()}d=!0,f.innerText="Break Time! Take a rest.",g.src="/sleep_cat.jpg"}a=Number(d?p.value:u.value)*60,b(),m.innerText="Start!"},b=()=>{const n=Math.floor(a/60),e=a%60;w.innerText=`${n.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`};m.onclick=()=>{if(l)clearInterval(l),l=null,m.innerText="Resume";else{const n=Number(u.value),e=Number(p.value);a||(a=(d?e:n)*60),m.innerText="Pause",l=window.setInterval(()=>{a<=0?v():(a--,b())},1e3)}};window.onload=y;
